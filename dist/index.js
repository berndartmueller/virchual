"use strict";function t(t,i){Object.keys(t).some((s,e)=>i(t[s],s,e))}function i(t,i){return t?t.querySelector(i.split(" ")[0]):null}function s(i,s){const e=document.createElement(i);return t(s,(t,i)=>h(e,i,t)),e}function e(t,i){t&&t.appendChild(i)}function n(i,s){i&&t(s,(t,s)=>{null!==t&&(i.style[s]=t)})}function o(t,i,s){t&&a(i).forEach(i=>{i&&t.classList[s?"remove":"add"](i)})}function r(t,i){o(t,i,!0)}function h(t,i,s){t&&t.setAttribute(i,s)}function a(t){return Array.isArray(t)?t:[t]}function l(t,i,s){return Math.min(Math.max(t,i>s?s:i),i>s?i:s)}function c(t){const i=typeof t;return"number"===i&&t>0?parseFloat(t)+"px":"string"===i?t:""}function d(t,i){let o;if("string"==typeof i){const r=s("div",{});n(r,{position:"absolute",width:i}),e(t,r),o=r.clientWidth,a(r).forEach(t=>{t&&t.parentElement&&t.parentElement.removeChild(t)})}else o=i;return o}const u=new class{constructor(){this.data=[]}on(t,i,s,e={}){t.split(" ").forEach(t=>{s&&s.addEventListener(t,i,e),this.data.push({event:t,handler:i,elm:s,options:e})})}off(t,i){t.split(" ").forEach(t=>{this.data=this.data.filter(s=>!s||s.event!==t||s.elm!==i||(this.unsubscribe(s),!1))})}emit(t,...i){this.data.forEach(s=>{s.elm||s.event.split(".")[0]!==t||s.handler(...i)})}destroy(){this.data.forEach(this.unsubscribe),this.data=[]}unsubscribe(t){t.elm&&t.elm.removeEventListener(t.event,t.handler,t.options)}};class p{constructor(t){this.options=t,this.isLoop=!0}mount(t,i){this.swiperInstance=t,this.track=i.Track}go(t,i){const s=this.trim(this.parse(t));this.track.go(s,this.rewind(s),i)}parse(t){let i=this.swiperInstance.index;const s=String(t).match(/([+\-<>])(\d+)?/),e=s?s[1]:"",n=s?parseInt(s[2]):0;switch(e){case"+":i+=n||1;break;case"-":i-=n||1;break;case">":i=this.toIndex(n>-1?n:this.toPage(i)+1);break;case"<":i=this.toIndex(n>-1?n:this.toPage(i)-1);break;default:i=parseInt(t)}return i}toIndex(t){if(this.hasFocus())return t;const i=this.swiperInstance.length,s=this.options.perPage;let e=t*s;return e-=(this.pageLength*s-i)*Math.floor(e/i),i-s<=e&&e<i&&(e=i-s),e}toPage(t){if(this.hasFocus())return t;const i=this.swiperInstance.length,s=this.options.perPage;return i-s<=t&&t<i?Math.floor((i-1)/s):Math.floor(t/s)}trim(t){return this.isLoop||(t=this.options.rewind?this.rewind(t):l(t,0,this.edgeIndex)),t}rewind(t){const i=this.edgeIndex;if(this.isLoop){for(;t>i;)t-=i+1;for(;t<0;)t+=i+1}else t>i?t=0:t<0&&(t=i);return t}isRtl(){return"rtl"===this.options.direction}get pageLength(){const t=this.swiperInstance.length;return this.hasFocus()?t:Math.ceil(t/this.options.perPage)}get edgeIndex(){const t=this.swiperInstance.length;return t?this.hasFocus()||this.options.isNavigation||this.isLoop?t-1:t-this.options.perPage:0}get prevIndex(){let t=this.swiperInstance.index-1;return(this.isLoop||this.options.rewind)&&(t=this.rewind(t)),t>-1?t:-1}get nextIndex(){let t=this.swiperInstance.index+1;return(this.isLoop||this.options.rewind)&&(t=this.rewind(t)),this.swiperInstance.index<t&&t<=this.edgeIndex||0===t?t:-1}bind(){u.on("move",t=>{this.swiperInstance.index=t}),u.on("updated refresh",t=>{this.options=t||this.options,this.swiperInstance.index=l(this.swiperInstance.index,0,this.edgeIndex)})}hasFocus(){return!1!==this.options.focus}}class g{constructor(t){this.options=t,this.isVertical=!1,this.axis=this.isVertical?"y":"x",this.isDisabled=!1}mount(t,i){this.swiperInstance=t,this.track=i.Track,this.layout=i.Layout,this.controller=i.Controller,u.on("touchstart mousedown",this.onStart.bind(this),this.track.list),u.on("touchmove mousemove",this.onMove.bind(this),this.track.list,{passive:!1}),u.on("touchend touchcancel mouseleave mouseup dragend",this.onEnd.bind(this),this.track.list)}onStart(t){this.isDisabled||this.isDragging||(this.startCoord=this.track.toCoord(this.track.position),this.startCoord={x:0,y:0},this.startInfo=this.analyze(t,{}),this.currentInfo=this.startInfo)}onMove(t){if(this.startInfo)if(this.currentInfo=this.analyze(t,this.startInfo),this.isDragging){t.cancelable&&t.preventDefault();const i=this.startCoord[this.axis]+this.currentInfo.offset[this.axis];this.track.translate(this.resist(i))}else this.shouldMove(this.currentInfo)&&(u.emit("drag",this.startInfo),this.isDragging=!0)}shouldMove({offset:t}){{let i=180*Math.atan(Math.abs(t.y)/Math.abs(t.x))/Math.PI;return this.isVertical&&(i=90-i),i<45}}resist(t){return t}onEnd(){this.startInfo=null,this.isDragging&&(u.emit("dragged",this.currentInfo),this.go(this.currentInfo),this.isDragging=!1)}go(t){const i=t.velocity[this.axis],s=Math.abs(i);if(s>0){const e=this.options,n=i<0?-1:1;let o=this.track.position;s>e.flickVelocityThreshold&&Math.abs(t.offset[this.axis])<e.swipeDistanceThreshold&&(o+=n*Math.min(s*e.flickPower,this.layout.width*(e.flickMaxPages||1)));let r=this.track.direction.toIndex(o);r===this.swiperInstance.index&&(r+=n*this.track.direction.sign),this.controller.go(r,e.isNavigation)}}analyze(t,i){const{timeStamp:s,touches:e}=t,{clientX:n,clientY:o}=e?e[0]:t,{x:r=n,y:h=o}=i.to||{},a={x:n-r,y:o-h},l=s-(i.time||0);return{offset:a,velocity:{x:a.x/l,y:a.y/l},to:{x:n,y:o},time:s}}}class f extends class{constructor(t){this.options=t}mount(t,i){this.swiperInstance=t,this.virtual=i.Virtual,this.track=i.Track,this.bind(),this.init()}init(){this.initLayout(),n(this.swiperInstance.root,{maxWidth:c(this.options.width)}),this.virtual.each(t=>{t.slide.style[this.margin]=c(this.gap)}),this.onResize()}bind(){u.on("resize load",function(t,i){let s;return function(){s||(s=setTimeout(()=>{t(),s=null},i))}}(()=>{u.emit("resize")},100),window),u.on("resize",this.onResize.bind(this)),u.on("updated refresh",this.init.bind(this))}onResize(){n(this.track.list,{width:c(this.listWidth),height:c(this.listHeight)});const t=c(this.slideHeight);this.virtual.each(i=>{n(i.container,{height:t}),n(i.slide,{width:this.options.autoWidth?null:c(this.slideWidth(i.index)),height:i.container?null:t})})}}{initLayout(){this._gap=d(this.swiperInstance.root,this.options.gap);const t=this.options.padding||{left:0,right:0},{left:i,right:s}=t;this.padding={left:d(this.swiperInstance.root,i),right:d(this.swiperInstance.root,s)},n(this.track.list,{paddingLeft:c(i),paddingRight:c(s)})}totalWidth(t){return this.virtual.getSlides().filter(i=>i.index<=t).reduce((t,i)=>t+this.slideWidth(i.index)+this.gap,0)}get width(){return this.track.list.clientWidth-this.padding.left-this.padding.right}get listWidth(){const t=this.virtual.total;return this.options.autoWidth?5e3*t:this.totalWidth(t)}get listHeight(){return 0}get slideHeight(){const t=this.options.height||this.options.fixedHeight||this.width*this.options.heightRatio;return d(this.swiperInstance.root,t)}slideWidth(t){if(this.options.autoWidth){const i=this.virtual.getSlide(t);return i?i.slide.offsetWidth:0}const i=this.options.fixedWidth||(this.width+this.gap)/this.options.perPage-this.gap;return d(this.swiperInstance.root,i)}get height(){return 0}get margin(){return"margin"+("rtl"===this.options.direction?"Left":"Right")}get gap(){return this._gap}}class m{constructor(t,i,s){this.options=t,this.instance=i,this.components=s,this.axis="X",this.sign=-1,this.virtual=s.Virtual,this.layout=s.Layout}toPosition(t){return this.sign*(this.layout.totalWidth(t-1)+this.offset(t))}toIndex(t){t=l(t*=this.sign,this.layout.totalWidth(this.virtual.total),0);const i=this.virtual.getSlides();for(const s in i){i[s];const e=this.instance.index,n=this.sign*this.toPosition(e);if(n<t&&t<=n+this.layout.slideWidth(e)+this.layout.gap)return e}return 0}trim(t){return l(t,this.sign*(this.layout.totalWidth(this.virtual.total)-(this.layout.width+this.layout.gap)),0)}offset(t){const{focus:i}=this.options,s=this.layout.slideWidth(t);return"center"===i?-(this.layout.width-s)/2:-(parseInt(""+i)||0)*(s+this.layout.gap)}}class w{constructor(t){this.options=t,this.currPosition=0,this.isVertical=!1,this.isFade=!1}get direction(){return this._direction}get list(){return document.querySelector(".vswiper-wrapper")}mount(t,i){this.swiperInstance=t,this.controller=i.Controller,this.transition=i.Transition,this._direction=new m(this.options,t,i)}mounted(){this.isFade}go(t,i,s){const e=this.getTrimmedPosition(t);Math.abs(e-this.currPosition)>=1||this.isFade?this.transition.start(t,i,0,this.toCoord(e),()=>{this.end(t,i,0,s)}):0!==t&&"move"===this.swiperInstance.options.trimSpace?this.controller.go(t+t-0,s):this.end(t,i,0,s)}end(t,i,s,e){n(this.list,{transition:""}),this.isFade||this.jump(i)}jump(t){this.translate(this.getTrimmedPosition(t))}translate(t){this.currPosition=t,n(this.list,{transform:`translate${this._direction.axis}(${t}px)`})}trim(t){return t}toCoord(t){return{x:this.isVertical?0:t,y:this.isVertical?t:0}}get position(){return this.currPosition}getTrimmedPosition(t){return this.trim(this._direction.toPosition(t))}}const v={active:"is-active",visible:"is-visible",loading:"is-loading"};class x{constructor(t,s,e,n){var o,r;this.options=t,this.index=s,this.realIndex=e,this.slide=n,this.container=i(this.slide,".vswiper-wrapper"),this.isClone=e>-1,this.styles=(o=this.slide,r="style",(o?o.getAttribute(r):"")||""),this.statusUpdateEvents="ready.slide updated.slide resize.slide "+(this.options.updateOnMove?"move.slide":"moved.slide")}mount(t,i){var s;this.swiperInstance=t,this.track=i.Track,this.isClone||(this.slide.id=`${this.swiperInstance.root.id}-slide${s=this.index+1,s<10?"0"+s:s}`),u.on(this.statusUpdateEvents,()=>this.update()),u.on("update.slide",this.restoreStyles)}destroy(){var t;u.off(this.statusUpdateEvents),u.off("update.slide"),r(this.slide,(t=v,Object.keys(t).map(i=>t[i]))),this.restoreStyles()}update(){this.updateClasses(this.isActive(),!1),this.updateClasses(this.isVisible(),!0)}isActive(){return this.swiperInstance.index===this.index}isVisible(){const t=this.isActive();if(t)return t;const{floor:i}=Math,s="ttb"===this.options.direction?"clientHeight":"clientWidth",e=i((this.track.direction.toPosition(this.index)+this.track.direction.offset(this.index)-this.track.position)*this.track.direction.sign),n=i(e+this.slide[s]),o=this.track.list[s];return 0<=e&&e<=o&&0<=n&&n<=o}isWithin(t,i){let s=Math.abs(t-this.index);return this.isClone||(s=Math.min(s,this.swiperInstance.length-s)),s<i}updateClasses(t,i){const s=i?"visible":"active",e=v[s];t?(o(this.slide,e,!1),u.emit(""+s,this.slide)):function(t,i){return!!t&&t.classList.contains(i)}(this.slide,e)&&(r(this.slide,e),u.emit(""+(i?"hidden":"inactive"),this.slide))}restoreStyles(){h(this.slide,"style",this.styles)}}class I{constructor(t){this.options=t}mount(t,i){this.swiperInstance=t,this.track=i.Track,this.init()}get total(){return this.slides.length}get length(){return this.slides.length}getSlide(t){return this.virtualSlides.filter((i,s)=>s===t)[0]}getSlides(){return this.virtualSlides}each(t){this.virtualSlides.forEach(t)}init(){this.virtualSlides=[],"function"==typeof this.options.slides?this.slides=this.options.slides():this.slides=this.options.slides,this.slides.slice(0,3).forEach((t,i)=>{const n=function(t){const i=s("div",{});return i.innerHTML=t,i.firstChild}(`<div class='vswiper-slide'>${t}</div>`);e(this.track.list,n),this.register(n,i,-1)})}register(t,i,s){const e=new x(this.options,i,s,t);e.mount(this.swiperInstance,{Track:this.track}),this.virtualSlides.push(e)}}class y{constructor(t){this.options=t}mount(t,i){this.controller=i.Controller,this.track=i.Track,this.list=this.track.list,u.on("transitionend",t=>{t.target===this.list&&this.endCallback&&this.endCallback()},this.list)}start(t,i,s,e,o){const r=this.options,h=this.controller.edgeIndex;let a=r.speed;this.endCallback=o,(0===s&&i>=h||s>=h&&0===i)&&(a=r.rewindSpeed||a),n(this.list,{transition:`transform ${a}ms ${r.easing}`,transform:`translate(${e.x}px,${e.y}px)`})}}class k{constructor(t,s={},e={}){this.selector=t,this.options=s,this.components=e,this.root=t instanceof Element?t:i(document,t),function(t,i){if(!t)throw new Error(i)}(this.root,"An invalid element/selector was given."),this._index=0,this.options=Object.assign({slides:[],speed:400,rewind:!1,focus:!1,perPage:1,isNavigation:!0,trimSpace:!1,autoWidth:!1,padding:void 0,width:0,gap:0,direction:"ltr",fixedWidth:0,height:0,fixedHeight:0,heightRatio:0,updateOnMove:!1,swipeDistanceThreshold:150,flickVelocityThreshold:.6,flickPower:600,flickMaxPages:1,easing:"cubic-bezier(.42,.65,.27,.99)"},s);const n={Controller:new p(this.options),Transition:new y(this.options),Track:new w(this.options),Virtual:new I(this.options),Drag:new g(this.options),Layout:new f(this.options)};this.components=Object.assign(Object.assign({},n),this.components),this.mount()}get index(){return this._index}set index(t){this._index=parseInt(""+t,10)}get length(){return 0}mount(){try{t(this.components,(t,i)=>{t.mount(this,this.components)})}catch(t){return i=t.message,console.error("[SPLIDE] "+i),null}var i}}new k(window.document.body,{slides:()=>{const t=[];for(let i=0;i<5;i++)t.push(`<span>Slide ${i+1}</span>`);return t}});module.exports=k;
